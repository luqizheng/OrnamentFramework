webpackJsonp([5],[,,,,,,,,,,,,,,function(e,n,t){function r(e){this.opts={url:e,contentType:"application/json; charset=utf-8"},this.Put=function(e){var n=this.ext.call(this,"PUT",e);return i.ajax(n)},this.Delete=function(e){var n=this.ext.call(this,"DELETE",e);return e.id&&(n.url+="/"+e.id),i.ajax(n)},this.Post=function(e){var n=this.ext.call(this,"POST",e);return i.ajax(n)},this.Get=function(e){var n=this.ext.call(this,"GET",e);return i.ajax(n)},this.ext=function(e,n){var t=i.extend({},this.opts,{type:e});return t.data="GET"!==e?JSON.stringify(n):n,t}}var i=t(2);e.exports={create:function(e){return new r(e)}}},,function(e,n,t){function r(e){var n=null,t=a.create("orgEditor",function(e){o.mix(n,e)});s.create("orgTree",function(e){n=e,t.org=e});o.scan(e)}function i(){s.destory("orgTree"),a.destory("orgEditor")}t(17);t(18),t(20);var o=t(6),s=(t(2),t(22)),a=t(23);e.exports={load:r,unload:i}},function(e,n,t){var r=t(14).create("/api/orgs");e.exports={list:function(e){return r.Get({parentId:e})},save:function(e){return r.Post(e)}}},function(e,n,t){"use strict";var r=0;avalon.component("ms-tree",{template:t(19),defaults:{icons:{added:["fa","fa-large"],close:"fa-plus-circle",open:"fa-minus-circle",withoutChild:"icon-leaf",withChild:"parent_li"},getChangeIcon:function(e){var n=this.icons.added.slice(0),t="";return t=this.hasSubTree(e)?e.open?this.icons.open:this.icons.close:this.icons.withoutChild,n.push(t),n},onSelect:function(e){console.warn("请设置tree控件的onSelect方法")},hasSubTree:function(e){var n=e[this.subPropName];return 0!=n.length},tree:[],subPropName:"subtree",renderSubTree:function(e){var n=e[this.subPropName];return n.length?'<wbr is="ms-tree" ms-widget="{$id:"tree_'+ ++r+'", tree: el.'+this.subPropName+',clz:"parent_li"}" />':""},openSubTree:function(e,n){this.onSelect(e),e.open=!e.open,n.stopPropagation()},getText:function(e){return e.Name}}})},function(e,n){e.exports='<ul>\r\n    <li ms-for="(index, el) in @tree | get(0)" ms-click="@openSubTree(el,$event)" \r\n        ms-class="@hasSubTree(el)?\'parent_li\':\'\'" style="cursor:pointer">\r\n\r\n        <span>\r\n            <i ms-class="@getChangeIcon(el)"></i>\r\n            {{@getText(el)}}\r\n        </span>\r\n        <div ms-html="@renderSubTree(el)" ms-visible="!!el.open"></div>\r\n    </li>\r\n</ul> '},function(e,n,t){avalon.component("ms-panel",{template:t(21),defaults:{}})},function(e,n){e.exports='<div class="jarviswidget">\r\n    <header>\r\n       <slot name=\'title\'></slot>\r\n\r\n    </header>\r\n    <div>\r\n        <div class="jarviswidget-editbox">\r\n           <slot name=\'box\'/>\r\n        </div>\r\n        <div class="widget-body">\r\n            <slot name="content"></slot>\r\n        </div>\r\n    </div>\r\n</div>'},function(e,n,t){var r=t(17),i=t(6);t(2);e.exports={create:function(e,n){var t=i.define({$id:e,orgConfig:{subPropName:"subOrgs",getText:function(e){return e.name},onSelect:function(e){n&&n(e)}},orgs:[{name:"",subOrgs:[],open:!1,id:0}]});return r.list(null).done(function(e){t.orgs=e}),t},destory:function(e){delete i.vmodels[e]}}},function(e,n,t){var r=t(6),i=t(2),o=t(17);e.exports={destory:function(e){delete r.vmodels[e]},create:function(e,n){var s=r.define({$id:e,org:{id:0,name:"",remark:"",parentId:""}});return t.e(1,function(){var s=t(7),a=i("#"+e);s.forWebApi(a,function(){var t=r.vmodels[e].org.$model,i={id:t.id,name:t.name,remark:t.remark,parent:t.parentId};o.save(i).done(function(e){alert("保存成功"),n&&n(e)})})}),s}}}]);