webpackJsonp([4],{12:function(t,e,n){function o(t){var e=avalon.define({$id:t,roles:[],edit:function(t){r.role=t,r.title="編輯角色",a.modal("show")},create:function(){r.title="新增角色",r.role={Id:"",Name:"",Remark:""},a.modal("show")}});i.list(0,30).done(function(t){e.roles=t}),a=$("#role-editor-dialog").modal({keyboard:!1,show:!1})}var a,i=n(13),r=null,l="roleIndex",u="roleEditor",s=n(15);t.exports={load:function(t){o(l),r=s.create(u,function(){a.modal("close")}),avalon.scan(t)},unload:function(){delete avalon.vmodels[l],delete avalon.vmodels[u]}}},13:function(t,e,n){var o="/api/roles",a=n(14).create(o);t.exports={list:function(t,e){return a.Get({pageIndex:t,pageSize:e})},save:function(t){return a.Post(t)}}},14:function(t,e,n){function o(t){this.opts={url:t,contentType:"application/json; charset=utf-8"},this.Put=function(t){var e=this.ext.call(this,"PUT",t);return a.ajax(e)},this.Delete=function(t){var e=this.ext.call(this,"DELETE",t);return t.id&&(e.url+="/"+t.id),a.ajax(e)},this.Post=function(t){var e=this.ext.call(this,"POST",t);return a.ajax(e)},this.Get=function(t){var e=this.ext.call(this,"GET",t);return a.ajax(e)},this.ext=function(t,e){var n=a.extend({},this.opts,{type:t});return n.data="GET"!==t?JSON.stringify(e):e,n}}var a=n(2);t.exports={create:function(t){return new o(t)}}},15:function(t,e,n){function o(t){return $("form",$("#"+t))}function a(t,e){n.e(1,function(){var a=n(7),i=o(t);a.forWebApi(i,function(){r.save(avalon.vmodels[t].role.$model).done(function(){alert("保存成功"),e()})})})}function i(t){var e=avalon.define({$id:t,role:{Id:"",Name:"",Remark:""},save:function(){o(t).submit()},title:""});return e}var r=n(13);t.exports={create:function(t,e){return a(t,e),i(t)}}}});