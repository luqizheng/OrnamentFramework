<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <meta charset="utf-8" />
        <script src="../dist/avalon.js"></script>
  
        <script type="html" id="ddd">
        <div>
            <div ms-for="el in @innerArray" >
               
                <div ms-if="el.messageType == 'PUBLIC_CHAT'"
                     ms-text="el.message"></div>
                  
            </div>
        </div>

        </script>
        <script type="text/javascript">

        var template = document.getElementById('ddd').text

        avalon.component("ms-messagelist", {
            template: template,
            defaults: {
                innerArray: []
            }
        });


        avalon.define({
            $id: "main",
            message_list: [
                {messageType:"PUBLIC_CHAT", message:"aaa"},
                {messageType:"XXX", message:"bbbb"}
            ]
        })

        </script>
    </head>
    <body>

    <div ms-controller="main">
        <wbr ms-widget='{is:"ms-messagelist",innerArray:@message_list}' />
    </div>
</body>
</html>