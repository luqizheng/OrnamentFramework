@using Ornament
@using Ornament.MemberShip
@using Ornament.MemberShip.Plugin.Models
@using Ornament.Properties
@using Ornament.Web
@using Ornament.Web.UI.Theme
@model Ornament.MemberShip.Org
@{
    ViewBag.Title = Html.GetEmbededResourceString("Page_title");
    Layout = OrnamentContext.Configuration.Layout();
    string parentId = Model != null ? Model.Id : "";
    IEnumerable<Org> childOrgs = ((IEnumerable<Org>)ViewData["Orgs"]) ?? new List<Org>();
    bool editPermission = OrnamentContext.MemberShip.HasRight("Org", OrgOperator.Modify);
}
@section pageTitle
{
    @if (Model == null || Model.Parent == null)
    {
        @Html.GetEmbededResourceString("Page_title");
    }
    else
    {
        @Model.Name
    }
}
@using (Panel box = Html.Panel("col-md-6 col-lg-6 col-xs-6 col-sm-6"))
{
    @box.Header(
        @<text>
    <a class="btn btn-primary" href="@Url.Action("Create", new { parentId })"><i class="icon-white icon-plus"></i>
        @Resources.Create
    </a>
    </text>)

    @box.Body(@<text>
    @Html.Partial("OrgTreeView", childOrgs)
    @if (childOrgs.Count() != 0)
    {

    }
    else
    {
        <div class="alert">
            @Html.GetEmbededResourceString("NotFoundOrg")
        </div>
    }

    </text>)
}

@using (Panel box = Html.Panel("col-md-3 col-lg-3 col-xs-3 col-sm-3"))
{
    @box.Header(
        @<text>
    <h2>Edit Org</h2>
    </text>
    )
    @box.Body(@<text>
    <form method="POST" ms-controller="edit" class="form-horizontal">
        <div class="form-group">
            <label class="col-md-2">@Html.DisplayNameFor(s => s.Name)</label>
            <div class="col-md-10">
                @Html.EditorFor(model => model.Name, new { HtmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.Name)
            </div>
        </div>

        <div class="form-group">
            <label class="col-md-2">@Html.DisplayNameFor(s => s.Remarks)</label>
            <div class="col-md-10">
                @Html.EditorFor(model => model.Remarks, new { HtmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.Remarks)
            </div>
        </div>
        <div class="form-actions">
            <button class="btn">
                <i class="fa fa-save"></i>
                @Ornament.Properties.Resources.Save
            </button>
        </div>
    </form>
    </text>)
}

@section scripts{
    <script type="text/javascript">
        require(['@Scripts.Url("/MemberShips/Scripts/Org/Index.js")'],function(init) {
            
        })
    </script>
}