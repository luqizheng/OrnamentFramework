@using System.Text.RegularExpressions
@model DateTime?
@{
    var display = ViewData.ModelMetadata.DisplayName ?? ViewData.ModelMetadata.PropertyName;
    var displayValue = this.Model!=null?this.Model.Value.ToString(this.ViewData.ModelMetadata.DisplayFormatString):"";
    var format = ViewData.ModelMetadata.DisplayFormatString ?? "yyyy-MM-dd";
    var inputMask = format.ToLower();
}
<div class="control-group">
    @Html.Label("", display, new { @class = "control-label" })
    <div class="controls">
        @*
        data-data-fromat for bootstrap date.
        http://www.eyecon.ro/bootstrap-datepicker/
        *@
        <div data-date-format="@inputMask" data-date="@displayValue" class="date input-append">
            @Html.TextBox("", displayValue, new Dictionary<string, object>()
                {
                    {"inputmask-format",  Regex.Replace(inputMask, @"(\w)(\1)+", "$1")},
                    {"placeholder",format},
                    
                })
            <span class="add-on"><i class="icon-calendar"></i></span>
            @Html.ValidationSummary("")
        </div>

    </div>
</div>
