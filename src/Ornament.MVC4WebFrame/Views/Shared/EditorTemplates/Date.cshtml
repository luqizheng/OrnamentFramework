@using System.Text.RegularExpressions
@model DateTime
@{
    var display = ViewData.ModelMetadata.DisplayName ?? ViewData.ModelMetadata.PropertyName;
    var displayValue = this.Model.ToString(this.ViewData.ModelMetadata.DisplayFormatString);
}
<div class="control-group">
    @Html.Label("", display, new { @class = "control-label" })
    <div class="controls">
        <div data-date-format="@ViewData.ModelMetadata.DisplayFormatString.ToLower()" data-date="@displayValue" class="date input-append">
            @Html.TextBox("", displayValue, new Dictionary<string, object>()
                {
                    {"inputmask-format", Regex.Replace(ViewData.ModelMetadata.DisplayFormatString.ToLower(),@"(\w)(\1)+","$1")}
                })
            <span class="add-on"><i class="icon-calendar"></i></span>
            @Html.ValidationSummary("")
        </div>
    </div>
</div>
